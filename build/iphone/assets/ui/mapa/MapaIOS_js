function MapaIOS(){{var e="",t=Ti.Platform.osname;Ti.Platform.version,Ti.Platform.displayCaps.platformHeight,Ti.Platform.displayCaps.platformWidth}e="iphone"===t||"ipad"===t?"":"mobileweb"===t?"":"/",Ti.API.info("Ruta1:"+Titanium.Filesystem.getResourcesDirectory()),Ti.API.info("Ruta2:"+Titanium.Filesystem.getApplicationDataDirectory());var a=Titanium.UI.createWindow({backgroundColor:"white",exitOnClose:!1,modal:!0,layout:"composite",navBarHidden:!0}),o=Ti.Platform.displayCaps.platformWidth,n=(Ti.Platform.displayCaps.platformHeight,Titanium.UI.createButton({backgroundImage:e+"ui/img/android/header.png",top:"0px",left:"0",height:"110px",width:o+"px"}));n.addEventListener("click",function(){a.close()});var r=Titanium.UI.createView({backgroundImage:e+"ui/img/android/barra-menu.jpg",top:"0px",height:"15%",widht:o+"px",zIndex:9999,layout:"composite"});r.addEventListener("click",function(){a.close()});var d=Titanium.UI.createView({backgroundColor:"transparent",height:"90px",widht:"80%",zIndex:9999}),l=Titanium.UI.createImageView({image:e+"ui/img/android/camion.png",left:"10%",width:"12%",height:"62%",zIndex:9999}),s=Titanium.UI.createImageView({image:e+"ui/img/android/titulo.png",left:"24%",width:"65%",height:"60%",zIndex:9999});d.add(l),d.add(s),r.add(d),a.add(r);var m=Titanium.UI.createImageView({image:e+"ui/img/android/radar-banner.png",top:"20%",left:"0%",width:"25%",height:"10%",zIndex:9999});a.add(m);var p=("android"===Ti.Platform.name?16:14,Titanium.UI.createButton({backgroundColor:"#0F5E8B",color:"white",title:"TrucksApp",textAlign:"center",top:0,left:0,height:"12%",width:o,tintColor:"white"}),require("ti.map")),c=0,u=Titanium.Filesystem.getFile(Titanium.Filesystem.getApplicationDataDirectory(),"numtrucks.json");u.setRemoteBackup=!1,u.exists()?(fileTmp=JSON.parse(u.read().text),c=fileTmp.trucks,Ti.API.info("Se lee el Num de Trucks desde APD"+c)):(u=Titanium.Filesystem.getFile(Titanium.Filesystem.getResourcesDirectory(),"numtrucks.json"),u.setRemoteBackup=!1,fileTmp=JSON.parse(u.read().text),c=fileTmp.trucks,Ti.API.info("Se lee el Num Trucks desde RD"+c));var g=new Array(c),T=0;for(i=0;20>i;i++){Ti.API.info("Buscando Archivo:"+(i+1)+".json");var f=Titanium.Filesystem.getFile(Titanium.Filesystem.getApplicationDataDirectory(),i+1+".json");f.setRemoteBackup=!1;var h=[],I="";f.exists()?(I=Titanium.Filesystem.getApplicationDataDirectory()+"../Library/Caches/",h=JSON.parse(f.read().text),Ti.API.info("Se obtienen datos de AD"+h),g[T++]=p.createAnnotation({latitude:h.datos.latitud,longitude:h.datos.longitude,centerOffset:{x:80,y:25},image:I+h.datos.idTruck+"s.png",title:h.datos.nombre,subtitle:"Truck",myid:h.datos.idTruck,rightButton:Ti.UI.iPhone.SystemButton.CONTACT_ADD})):Ti.API.info("No se pudieron obtener los datos")}{var v=Ti.UI.createWindow({backgroundColor:"white"});Titanium.UI.createTab({icon:"KS_nav_views.png",title:"Tab 1",window:v})}Ti.API.info("Trucks:"+currentLat),Ti.API.info("Trucks:"+currentLon),Ti.API.info("Trucks:"+g.length);var y=p.createView({mapType:p.NORMAL_TYPE,region:{latitude:currentLat,longitude:currentLon,latitudeDelta:.05,longitudeDelta:.05},animate:!0,regionFit:!0,userLocation:!0,height:"100%",top:0,left:0,width:"100%",annotations:g});y.addEventListener("click",function(i){var e=i.clicksource;if(Ti.API.info(e+"Annotation "+i.title+" clicked, id: "+i.annotation.myid),"rightButton"==e){var t=require("ui/perfil/PerfilIos");new t(""+i.annotation.myid).open()}if("subtitle"==e){var t=require("ui/perfil/PerfilIos");new t(""+i.annotation.myid).open()}}),a.add(y);var w=Titanium.UI.createView({backgroundImage:e+"ui/img/android/barra-menu.jpg",top:"85%",height:"15%",widht:o+"px",zIndex:9999,layout:"composite"});a.add(w);var A=Titanium.UI.createImageView({image:e+"ui/img/android/gps-radar.png",top:"88%",left:"3%",width:"10%",height:"7%",zIndex:9999}),P=Titanium.UI.createImageView({image:e+"ui/img/android/truck-radar.png",top:"88%",left:"17%",width:"10%",height:"7%",zIndex:9999}),k=Titanium.UI.createImageView({image:e+"ui/img/android/promo-radar.png",top:"88%",left:"31%",width:"10%",height:"7%",zIndex:9999}),x=Titanium.UI.createImageView({image:e+"ui/img/android/estrella-radar.png",top:"88%",left:"45%",width:"10%",height:"7%",zIndex:9999}),b=Titanium.UI.createImageView({image:e+"ui/img/android/eventos-radar.png",top:"88%",left:"59%",width:"10%",height:"7%",zIndex:9999}),C=Titanium.UI.createImageView({image:e+"ui/img/android/antojo-radar.png",top:"88%",left:"73%",width:"10%",height:"7%",zIndex:9999}),S=Titanium.UI.createImageView({image:e+"ui/img/android/magazine-radar.png",top:"88%",left:"87%",width:"10%",height:"7%",zIndex:9999});return a.add(A),a.add(P),a.add(k),a.add(x),a.add(b),a.add(C),a.add(S),a}module.exports=MapaIOS;